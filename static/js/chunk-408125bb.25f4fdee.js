(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-408125bb"],{"6d7d":function(t,e,a){"use strict";var i=a("f684"),n=a.n(i);n.a},"9f3e":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"JPEGImager"}},[a("el-dialog",{attrs:{title:"压缩设置",visible:t.dealImageSetting,width:"30%"},on:{"update:visible":function(e){t.dealImageSetting=e}}},[a("div",[a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[t._v("图片质量：")]),t._v(" "),a("el-slider",{attrs:{max:1,step:.01,"format-tooltip":t.dealImageTooltip},model:{value:t.dealImageObj.quality,callback:function(e){t.$set(t.dealImageObj,"quality",e)},expression:"dealImageObj.quality"}})],1)]),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dealImageSetting=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.getDownToLoading},on:{click:t.getDownTo}},[t._v("确 定")])],1)]),t._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("图片压缩")]),t._v(" "),a("el-tooltip",{staticClass:"item",staticStyle:{float:"right",padding:"3px 0",cursor:"pointer"},attrs:{effect:"light",content:"请不要尝试加载图片以外文件,加载文件过多,处理中需要等待片刻!",placement:"top-start"}},[a("i",{staticClass:"el-icon-warning-outline"})])],1),t._v(" "),a("el-row",{attrs:{gutter:10}},[a("div",{staticClass:"JPEGImagerFile"},[a("div",[a("el-row",{attrs:{gutter:10}},[a("el-col",{staticClass:"img-top",attrs:{xs:24,sm:12,md:14,lg:16}},[a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.JPEGImagerFileClick()}}},[t._v(" 加载图片 "+t._s(0==t.newImgAll.length?"":"("+t.newImgAll.length+")")+"\n              ")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:t.LoadClear}},[t._v(" 清除加载 ")])],1),t._v(" "),a("el-col",{staticClass:"img-top",attrs:{xs:24,sm:12,md:10,lg:8}},[a("div",{staticClass:"fileGo"},[a("el-button",{attrs:{type:"success"},on:{click:t.dealImageDownload}},[t._v(" 全部下载 ")]),t._v(" "),a("el-button",{attrs:{type:"success"},on:{click:function(e){t.dealImageSetting=!0}}},[t._v(" 开始压缩 ")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:t.dealImageDel}},[t._v(" 清除已处理 ")])],1)])],1),t._v(" "),a("input",{ref:"JPEGImagerFile",attrs:{hidden:"",type:"file",multiple:"multiple",accept:"image/png,image/jpeg"},on:{change:t.JPEGImagerFileChange}})],1)]),t._v(" "),t._l(t.imgAll,(function(e,i){return a("el-col",{key:i,staticStyle:{margin:"5px 0px"},attrs:{sm:24,md:24,lg:8}},[a("el-card",[a("img",{staticClass:"image",attrs:{src:e.base64}}),t._v(" "),a("div",{staticStyle:{padding:"14px"}},[a("div",{staticClass:"JPEGImager-bottom"},[a("p",{staticClass:"img-name"},[t._v("图片名称 ："+t._s(e.name))]),t._v(" "),a("el-button",{staticClass:"button",attrs:{type:"text"}},[a("a",{staticClass:"qrcode",attrs:{href:e.base64,download:e.name}},[t._v("下载图片")])])],1),t._v(" "),a("span",[t._v("图片大小 ："+t._s((e.base64Size/1024).toFixed())+" KB")]),t._v(" "),a("br"),t._v(" "),a("p",[a("time",[t._v(t._s(t.timeDate))])])])])],1)}))],2)],1)],1)},n=[],l=(a("47e7"),a("6d57"),a("9a33"),a("2b45"),a("cc57"),a("9e76"),a("a1d6")),s=a.n(l),o=a("ecc0"),r=a.n(o),g={name:"JPEGImager",data:function(){return{filesLength:0,newImgAll:[],imgAll:[],imgName:[],dealImageObj:{quality:.8},dealImageSetting:!1,timeDate:new Date,getDownToLoading:!1}},filters:{},mounted:function(){},methods:{JPEGImagerFileClick:function(){this.$refs.JPEGImagerFile.click()},dealImage:function(t,e,a){var i=this,n=new Image;n.src=t.result,n.onload=function(){var l=this,s=l.width,o=l.height,r=s/o;s=e.width||s,o=s/r;var g=document.createElement("canvas"),c=g.getContext("2d"),m=document.createAttribute("width");m.nodeValue=s;var d=document.createAttribute("height");d.nodeValue=o,g.setAttributeNode(m),g.setAttributeNode(d),c.drawImage(l,0,0,s,o);var u,f=g.toDataURL("image/jpeg",e.quality||.8);if(navigator.userAgent.match(/iphone/i)){var v=new MegaPixImage(n);v.render(g,{maxWidth:s,maxHeight:o,quality:e.quality||.8}),f=g.toDataURL("image/jpeg",e.quality||.8)}if(navigator.userAgent.match(/Android/i)){var h=new JPEGEncoder;f=h.encode(c.getImageData(0,0,s,o),100*e.quality||80)}if(f){var p=f.indexOf("=");if(p>0){var b=f.substring(0,p),w=b.length,I=w-w/8*2;u=Math.floor(I)}else{var _=f.length,y=_-_/8*2;u=Math.floor(y)}}else u=null;if(-1!=i.imgName.indexOf(t.name)){var A=(new Date).getTime().toString(),C=t.name,x=C.split("");x.splice(C.lastIndexOf("."),0,"-"+A.substr(A.length-1)),t.name=x.join("")}i.imgName.push(t.name);var D={base64:f,clearBase64:f.substr(f.indexOf(",")+1),base64Size:u,name:t.name};a(D)}},File_Reader:function(t){var e=this,a=[];if(window.FileReader)for(var i=0;i<t.length;i++){var n=new FileReader;n.readAsDataURL(t[i]),n.name=t[i].name,n.onloadend=function(t){a.push({result:t.target.result,name:t.target.name})}}return setTimeout((function(){e.$notify({title:"成功",message:a.length+" 条数据加载成功！",type:"success"})}),500),a},JPEGImagerFileChange:function(t){this.filesLength=t.target.files.length;var e=t.target.files;this.newImgAll=this.File_Reader(e)},dealImageTooltip:function(t){return(100*t).toFixed()+"%"},getDownTo:function(){var t=this;if(this.imgAll.length>0&&this.$notify({title:"警告",message:"检测到页面有数据，页面数据将追加至末尾，页面并不会主动删除数据",type:"warning"}),0==this.newImgAll.length)return this.$notify({title:"警告",message:"未加载任何数据！请加载数据后再行操作！",type:"warning"}),!1;t.getDownToLoading=!0,t.dealImageSetting=!1,t.newImgAll.forEach((function(e,a){t.dealImage(e,t.dealImageObj,(function(e){t.imgAll.push(e)}))})),t.$notify({title:"成功",message:"处理成功！",type:"success"}),setTimeout((function(){t.getDownToLoading=!1}),500)},dataURLtoBlob:function(t){var e=t.split(","),a=e[0].match(/:(.*?);/)[1],i=atob(e[1]),n=i.length,l=new Uint8Array(n);while(n--)l[n]=i.charCodeAt(n);return new Blob([l],{type:a})},blobToFile:function(t,e){return t.lastModifiedDate=new Date,t.name=e,t},dealImageDownload:function(){if(0==this.imgAll.length)return this.$notify({title:"警告",message:"没有处理的文件",type:"warning"}),!1;var t=this,e=new s.a;this.imgAll.forEach((function(a){var i=t.dataURLtoBlob(a.base64),n=t.blobToFile(i,a.name);e.file(a.name,n,{binary:!0})})),e.generateAsync({type:"blob"}).then((function(t){r.a.saveAs(t,"img.zip")}))},dealImageDel:function(){this.imgAll=[]},LoadClear:function(){this.newImgAll=[]}}},c=g,m=(a("6d7d"),a("9ca4")),d=Object(m["a"])(c,i,n,!1,null,null,null);e["default"]=d.exports},f684:function(t,e,a){}}]);